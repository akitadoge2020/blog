# 断点续传

## 下载

若要实现断点下载，首先，服务器在响应时，要在头中加入下面的字段：

```
Accept-Ranges: bytes
```

这个字段是向客户端表明：我这个文件可以支持传输部分数据，你只需要告诉我你需要的是哪一部分的数据即可，单位是字节。

此时，某些支持断点续传的客户端，比如迅雷，它就可以在请求时，告诉服务器需要的数据范围。具体做法是在请求头中加入下面的字段：

```
range: bytes=0-5000
```

客户端告诉服务器：请给我传递0-5000字节范围内的数据即可，无须传输全部数据。

完整流程如下：

<img src="https://penguinbucket.obs.cn-southwest-2.myhuaweicloud.com/img/image-20220525170353248.png" alt="image-20220525170353248" style="zoom: 80%;" />

## 上传

整体来说，实现断点上传的主要思路就是把要上传的文件切分为多个小的数据块然后进行上传。

![image-20220525171952427](https://penguinbucket.obs.cn-southwest-2.myhuaweicloud.com/img/image-20220525171952427.png)