# 作用域

作用域指的是我们有权访问的变量对象（Variable Object）。

JavaScript 中，作用域分为三种：

- 函数作用域
- 全局作用域
- 块级作用域

## 函数作用域

每个函数都会创建自己的作用域，在函数内部声明的变量，只能在函数内部访问，函数外部无法访问。

```js
// 此处无法使用bar变量
function foo () {
  var bar = 'bar';
  // 此处可以使用bar变量
}
```

由于只能在函数内部识别局部变量，因此能够在不同函数中使用同名变量。

在函数开始时会创建局部变量，在函数完成时会删除它们。

## 全局作用域

函数之外声明的变量，会成为全局变量，即网页的所有脚本和函数都能够访问它。

```js
var bar = 'bar';
// 此处可以使用bar变量
function foo () 
  // 此处也可以使用bar变量
}
```

## 块级作用域

通过关键字`let`、`const`即可创建块级作用域，所声明的变量在指定块的作用域外无法被访问。

块级作用域在如下情况被创建：

- 在一个函数内部

- 在一个代码块内部，即`{}`

```js
if (true) {
  let bar = 'bar';
  // 此处可以使用bar变量
} else {
  // 此处无法使用bar变量
}
// 此处无法使用bar变量
```

块级作用域有以下几种特点：

- 不会变量提升
- 不能重复声明

## 作用域链

当我们在函数中访问一个变量时，首先会在当前的函数作用域中查找，如果没找到，则会到父级作用域中查找，以此类推向上查找形成的链条就是作用域链。

需要注意的是，「到父级作用域中查找」这句话不够严谨。

这里我们通过一个例子来说明：

```js
var x = 10;
function fn() {
    console.log(x);
}
function show(f) {
    var x = 20;
    (function () {
        f(); // 10，而不是20
    })();
}
show(fn);
```

这里的形参`f`函数，也就是`fn`函数，应该从哪个作用域中查找`x`变量呢？

要到创建 `fn` 函数的那个作用域中查找，**无论 `fn` 函数将在哪里调用**。

因此纠正一下作用域链的概念：

当我们在函数中访问一个变量时，首先会在当前的函数作用域中查找，如果没找到，则会到声明该函数的作用域中查找，以此类推向上查找形成的链条就是作用域链。

## 总结

作用域指的是我们有权访问的变量对象（Variable Object）。

JavaScript 中，作用域分为三种：

- 函数作用域
- 全局作用域
- 块级作用域

当我们在函数中访问一个变量时，首先会在当前的函数作用域中查找，如果没找到，则会到声明该函数的作用域中查找，以此类推向上查找形成的链条就是作用域链。

<Vssue 
    :options="{ labels: [$page.relativePath.split('/')[0]] }" 
    :title="$page.relativePath.split('/')[1]" 
/>