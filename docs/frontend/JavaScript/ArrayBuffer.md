# ArrayBuffer

ArrayBuffer 是一个用于存储二进制数据的数组。

通过`new ArrayBuffer(字节数)`创建。

```js
// 创建一个用于存储10字节的内存空间
const bf = new ArrayBuffer(10);
```

## 读写 ArrayBuffer

对 ArrayBuffer 进行读写操作有两种方式：DataView 和类型化数组。

### DataView

通过`new DataView(bf, 偏移量, 操作字节长度)`

```js
// 对bf下标为1开始，长度为4的字节进行操作
const dv = new DataView(bf, 1, 4);

// 写
dv.setInt16(1, 3); // 对dv下标为1的字节设置为3(带符号16位整数)
dv.setInt8(1, 3);

// 读
dv.getInt16(1);
dv.getInt8(1);
```

::: warning 注意

如果写入时用 16 位，而读取时用 8 位，容易造成问题，因此通常不使用 DataView 来操作 ArrayBuffer。

:::



### 类型化数组

类型化数组的每一项都是以某种格式表示的原始二进制值。

类型化数组只是类数组，`Array.isArray()` 会返回 false。

常见的类型化数组类型：

| 类型         | 值范围                                         | 描述                                                  |
| ------------ | ---------------------------------------------- | ----------------------------------------------------- |
| Int8Array    | -128 ~ 127                                     | 8 位有符号整数                                        |
| Uint8Array   | 0 ~ 255                                        | 8 位无符号整数                                        |
| Int16Array   | -32768 ~ 32767                                 | 16 位有符号整数                                       |
| Uint16Array  | 0 ~ 65535                                      | 16 位无符号整数                                       |
| Int32Array   | -2147483648~2147483647                         | 32 位有符号整数                                       |
| Uint32Array  | 0~4294967295                                   | 32 位无符号整数                                       |
| Float32Array | `-3.4E38`~`3.4E38` 以及 `1.2E-38`（最小正数）  | 32 位 IEEE 浮点数（7 位有效数字，例如 `1.123456`）    |
| Float64Array | `-1.8E308`~`1.8E308` 以及 `5E-324`（最小正数） | 64 位 IEEE 浮点数（16 位有效数字，例如 `1.123...15`） |



