# 类型检查

## 如何进行类型检查？

在变量、函数参数、函数返回值的后面加上`:数据类型`即可。

## 基本类型

### Boolean 类型

```js
let flag: boolean = true;
```

### Number 类型

```js
let num: number = 1;
```

### String 类型

```js
let name: string = 'jack';
```

### 数组

数组的类型检查方式有两种：

```js
// 1.
let list: number[] = [1, 2, 3];
// 2.
let arr: Array<string> = ['a', 'b', 'c'];
```

由于第二种带有尖括号，而尖括号在 React 中表示组件，为了避免出现问题，建议使用第一种方式来进行类型检查。

### Object 类型

```js
let obj: object = {
	foo: 'foo',
	bar: 'bar'
}
```

### null 和 undefined

默认情况下，null 和 undefined 是其他类型的子类型，换句话说就是，null 和 undefined 可以赋值给任何类型，但这容易导致一些不必要的错误。

```js
let name: string = undefined;
name.toUpperCase(); // 报错
```

为了避免这些错误，建议在 ts 配置文件中设置`compilerOptions.strictNullChecks: true`，表示开启严格的空类型检查，这样就不能将这两个值赋值给其他类型。

## 其他的常用类型

### 联合类型

多种类型任选其一，可以配合类型保护进行判断。

::: tip 类型保护

当对某个变量进行类型判断之后，在判断的语句块中，可以确定它的确切类型，通常情况下可以用typeof、constructor来触发

:::

```js
let name: string|undefined;

if (typeof name === 'string') {
  // 在这里会触发类型保护，保证 name 一定是string
}
```

### void 类型

通常用于约束函数的返回值，表示该函数中没有任何返回。

```js
function log(msg: string): void {
	console.log(msg);
}
```

### never 类型

通常用于约束函数的返回值，表示该函数永远不会结束。

```js
function deadLoop(): never {
    while(true) {
        console.log(1);
    }
}
```

### 字面量类型

使用字面量进行约束。

```js
let gender: 'male'|'female' = 'male';
let user: {
  name: 'string' // 注意这里没有逗号
  age: 'number'
}
```

### 元组类型(Tuple)

一个固定长度的数组，并且数组的每一项类型确定。

```js
let arr:[string, number]; // arr变量必须是一个长度为2的数组，且第一项是字符串，第二项是数字
```

### any 类型

可以绕过类型检查，能赋值任意类型。

## 类型别名

